<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-tsx-ff0eb11140b3d50d608e.js" as="script"/><link rel="preload" href="/component---src-templates-post-tsx-2eb755a7e94564009b7a.js" as="script"/><link rel="preload" href="/path---conditional-array-object-literals-ae1cde5c70f125604236.js" as="script"/><link rel="preload" href="/app-9ada09adf4caf0eac5ed.js" as="script"/><link rel="preload" href="/commons-5fd7aeff2413da28908b.js" as="script"/><style data-styled-components="ZWAwl cdOVjg dSCNBr fCcvMz gnKOvf jHwHDF cZgTeP cCTmIf eNQreF leZqKM PXxyv hQsMKT bznLuh dZSrGf ipiMFF">
/* sc-component-id: sc-bdVaJa */
.ipiMFF{text-align:center;margin:4rem 0 2.5rem 0;font-size:1.4em;color:#f8f8f8;} @media only screen and (max-width:800px){.ipiMFF{font-size:1.2em;}}
/* sc-component-id: sc-global-1031813546 */
html{height:100%;font-size:10px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;} body{min-height:100%;} *{margin:0;padding:0;box-sizing:border-box;} a{-webkit-text-decoration:none;text-decoration:none;color:inherit;}
/* sc-component-id: sc-bwzfXH */
.ZWAwl{display:grid;min-height:100vh;grid-template-rows:auto 1fr auto;}
/* sc-component-id: sc-htpNat */
.dSCNBr{background-color:#292142;padding:32px 16px;color:white;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:12rem;cursor:pointer;}
/* sc-component-id: sc-bxivhb */
.fCcvMz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:1rem 0;}
/* sc-component-id: sc-ifAKCX */
.gnKOvf{font-size:3.3rem;line-height:3rem;text-align:center;-webkit-letter-spacing:1.5px;-moz-letter-spacing:1.5px;-ms-letter-spacing:1.5px;letter-spacing:1.5px;}
/* sc-component-id: sc-EHOje */
.jHwHDF{color:#978b9e;font-size:.9em;margin:0 .6rem 0 .5rem;font-weight:normal;}
/* sc-component-id: sc-bZQynM */
.cZgTeP{font-size:1.3rem;line-height:2.5rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-letter-spacing:.5px;-moz-letter-spacing:.5px;-ms-letter-spacing:.5px;letter-spacing:.5px;color:#cfcdd4;font-weight:normal;}
/* sc-component-id: sc-gzVnrw */
.cdOVjg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-width:0;}
/* sc-component-id: sc-htoDjs */
.cCTmIf{width:100%;background-color:#f8f8f8;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:64px 0 56px;margin-bottom:32px;min-height:20rem;} @media only screen and (max-width:800px){.cCTmIf{padding:32px 0 28px;}}
/* sc-component-id: sc-dnqmqq */
.eNQreF{max-width:850px;width:100%;padding:0 16px;}
/* sc-component-id: sc-iwsKbI */
.bznLuh{width:100%;max-width:850px;font-size:2em;padding:0 16px;margin-bottom:2rem;}
/* sc-component-id: sc-gZMcBi */
.leZqKM{color:#292142;font-weight:bold;margin-bottom:8px;font-size:3.2em;} @media only screen and (max-width:800px){.leZqKM{margin-bottom:2rem;font-size:2.5em;}}
/* sc-component-id: sc-gqjmRU */
.PXxyv{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;color:#8a8a8a;font-size:1.6em;}
/* sc-component-id: sc-VigVT */
.hQsMKT{margin:0 12px;}
/* sc-component-id: sc-jTzLTM */
.dZSrGf{max-width:850px;font-size:1.6em;line-height:1.8em;color:#333333;padding:0 16px;width:100%;} .dZSrGf > *:not(:first-child){margin-top:32px;} .dZSrGf h2 + *,.dZSrGf h3 + *,.dZSrGf h4 + *,.dZSrGf h5 + *,.dZSrGf h6 + *{margin-top:16px !important;} .dZSrGf ul,.dZSrGf ol{margin-left:1.1em;} .dZSrGf a{color:#3ea7bb;-webkit-text-decoration:underline;text-decoration:underline;} .dZSrGf a:visited{color:#3ea7bb;} .dZSrGf img{width:100%;border-radius:4px;} .dZSrGf img + em,.dZSrGf .gatsby-resp-image-wrapper + em{display:block;width:100%;font-size:1.4rem;font-style:normal;line-height:2rem;text-align:center;margin-top:8px;} .dZSrGf pre{overflow:auto;padding:12px;font-size:1.4rem;border-radius:4px;} .dZSrGf pre code{padding:0;} .dZSrGf code{background-color:#f8f8f8;padding:4px 8px;font-size:14px;} .dZSrGf blockquote{background-color:#292142;padding-left:8px;color:#757575;font-style:italic;} .dZSrGf blockquote p{background-color:white;padding-left:8px;} .dZSrGf iframe{border:none;}</style><title data-react-helmet="true">Conditionally adding entries to JS array and object literals | code &amp; such</title><meta data-react-helmet="true" name="theme-color" content="#292142"/><meta data-react-helmet="true" name="description" content="The problem A common way to define an array in Javascript is to use an array literal. However, it‚Äôs sometimes desirable to populate the array conditionally based on the value of some variable. Perhaps you‚Äôve attempted to accomplish this in the past with a ternary operator: or with the   operator. Both of the above‚Ä¶"/><style id="gatsby-inlined-css">pre{color:#1b1b1b;background-color:#f8f8f8}.token.cdata,.token.doctype,.token.prolog{color:#3ea7bb}.token.block-comment,.token.comment,.token.punctuation{color:#5f6364}.token.atrule,.token.attr-value,.token.boolean,.token.constant,.token.deleted,.token.function-name,.token.keyword,.token.number,.token.property,.token.symbol,.token.tag{color:#f05f40}.token.attr-name,.token.builtin,.token.char,.token.class-name,.token.function,.token.inserted,.token.selector,.token.string{color:#3ea7bb}.token.entity,.token.important,.token.operator,.token.regex,.token.url,.token.variable{color:#9756e1}.language-css .token.string,.style .token.string{color:#3ea7bb}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.namespace{opacity:.7}.token.cr:before,.token.lf:before,.token.tab:not(:empty):before{color:#e0d7d1}</style></head><body><div id="___gatsby"><div class="sc-bwzfXH ZWAwl" data-reactroot="" data-reactid="1" data-react-checksum="-1669560041"><!-- react-empty: 2 --><div class="sc-gzVnrw cdOVjg" data-reactid="3"><!-- react-empty: 4 --><a class="sc-htpNat dSCNBr" href="/" data-reactid="5"><div class="sc-bxivhb fCcvMz" data-reactid="6"><h1 class="sc-ifAKCX gnKOvf" data-reactid="7"><!-- react-text: 8 -->code<!-- /react-text --><span class="sc-EHOje jHwHDF" data-reactid="9">&amp;</span><!-- react-text: 10 -->such<!-- /react-text --></h1><h4 class="sc-bZQynM cZgTeP" data-reactid="11">A blog about code, and such.</h4></div></a><header class="sc-htoDjs cCTmIf" data-reactid="12"><div class="sc-dnqmqq eNQreF" data-reactid="13"><h1 class="sc-gZMcBi leZqKM" data-reactid="14">Conditionally adding entries to JS array and object literals</h1><div class="sc-gqjmRU PXxyv" data-reactid="15"><!-- react-text: 16 -->Kalle Bornemark<!-- /react-text --><span class="sc-VigVT hQsMKT" data-reactid="17">‚Ä¢</span><!-- react-text: 18 -->31st August 2018<!-- /react-text --><span class="sc-VigVT hQsMKT" data-reactid="19">‚Ä¢</span><!-- react-text: 20 -->3 min read<!-- /react-text --></div></div></header><div class="sc-iwsKbI bznLuh" data-reactid="21"><a href="/" data-reactid="22">‚Üê</a></div><article class="sc-jTzLTM dZSrGf" data-reactid="23"><h2>The problem</h2>
<p>A common way to define an array in Javascript is to use an array literal.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> picnicBasket <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"burrito ü•ô"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"strawberry üçì"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"bottle of champagne üçæ"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>
      </div>
<p>However, it‚Äôs sometimes desirable to populate the array conditionally based on the value of some variable. Perhaps you‚Äôve attempted to accomplish this in the past with a ternary operator:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> picnicBasket <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"burrito ü•ô"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"strawberry üçì"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"bottle of champagne üçæ"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  isSunny <span class="token operator">?</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"sunglasses üï∂"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span> <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picnicBasket<span class="token punctuation">)</span>
<span class="token comment">// isSunny === true  ->  [Object, Object, Object, Object]</span>
<span class="token comment">// isSunny === false  ->  [Object, Object, Object, null]</span></code></pre>
      </div>
<p>or with the <code class="language-text">&amp;&amp;</code> operator.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> picnicBasket <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"burrito ü•ô"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"strawberry üçì"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"bottle of champagne üçæ"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  isSunny <span class="token operator">&amp;&amp;</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"sunglasses üï∂"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picnicBasket<span class="token punctuation">)</span>
<span class="token comment">// isSunny === true  ->  [Object, Object, Object, Object]</span>
<span class="token comment">// isSunny === false  ->  [Object, Object, Object, false]</span></code></pre>
      </div>
<p>Both of the above result in either <code class="language-text">null</code> or <code class="language-text">false</code> being added to the array if <code class="language-text">isSunny</code> is false, which is not what we want.</p>
<h2>The solution</h2>
<p>To solve this, we have two options.</p>
<h3>Using filter</h3>
<p>One rather clean and readable approach is to populate the array using the <code class="language-text">&amp;&amp;</code> operator, and then remove its falsy values by chaining on a <code class="language-text">filter</code> call.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> picnicBasket <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"burrito ü•ô"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"strawberry üçì"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"bottle of champagne üçæ"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  isSunny <span class="token operator">&amp;&amp;</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"sunglasses üï∂"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picnicBasket<span class="token punctuation">)</span>
<span class="token comment">// isSunny === true  ->  [Object, Object, Object, Object]</span>
<span class="token comment">// isSunny === false  ->  [Object, Object, Object]</span></code></pre>
      </div>
<h3>Using the spread operator</h3>
<p>Another approach is to leverage the fact that <strong>spreading an empty array inside another array doesn‚Äôt result in anything</strong>.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> picnicBasket <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"burrito ü•ô"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"strawberry üçì"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"bottle of champagne üçæ"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">(</span>isSunny <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"sunglasses üï∂"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picnicBasket<span class="token punctuation">)</span>
<span class="token comment">// isSunny === true  ->  [Object, Object, Object, Object]</span>
<span class="token comment">// isSunny === false  ->  [Object, Object, Object]</span></code></pre>
      </div>
<h3>What about object literals?</h3>
<p>While the above approach can look a bit messy at first, it has the benefit of not only working with array literals, but with object literals too. In the example below, the property <code class="language-text">c</code> with the value <code class="language-text">3</code> will only be added if <code class="language-text">someCondition</code> is true.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">(</span>someCondition <span class="token operator">?</span> <span class="token punctuation">{</span> c<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
<span class="token comment">// someCondition === true  ->  Object {a: 1, b: 2, c: 3}</span>
<span class="token comment">// someCondition === false  ->  Object {a: 1, b: 2}</span></code></pre>
      </div>
<p>And that‚Äôs pretty neat!</p></article></div><footer class="sc-bdVaJa ipiMFF" data-reactid="24">MIT ‚í∏ Kalle Bornemark</footer></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-9ada09adf4caf0eac5ed.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","30862416422887":"component---src-templates-post-tsx-2eb755a7e94564009b7a.js","178469467687848":"component---src-pages-404-tsx-cd325f6aeb6df6c35ebd.js","221374088121123":"component---src-pages-index-tsx-414e2920a31d9d13cda6.js","60335399758886":"path----557518bd178906f8d58a.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","109763708754463":"path---webpack-aliases-typescript-857c12c4f634633acbd4.js","195004302411781":"path---conditional-array-object-literals-ae1cde5c70f125604236.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","142629428675168":"path---index-f7984622eb862abc3b1a.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","22676092666560":"component---src-layouts-index-tsx-ff0eb11140b3d50d608e.js"}/*]]>*/</script><script>
            
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-41576939-5', 'auto');
      }
      </script><script>/*<![CDATA[*/["/commons-5fd7aeff2413da28908b.js","/app-9ada09adf4caf0eac5ed.js","/path---conditional-array-object-literals-ae1cde5c70f125604236.js","/component---src-templates-post-tsx-2eb755a7e94564009b7a.js","/component---src-layouts-index-tsx-ff0eb11140b3d50d608e.js"].forEach(function(s){document.write('<script src="'+s+'" defer></'+'script>')})/*]]>*/</script></body></html>