webpackJsonp([0xb15afa2cc805],{366:function(n,a){n.exports={data:{site:{siteMetadata:{title:"Code & Stuff",author:"Kalle Bornemark"}},markdownRemark:{id:"D:/code/private/codestuff/src/pages/2018-08-31-conditional-array-object-literals/index.md absPath of file >>> MarkdownRemark",html:'<h2>The problem</h2>\n<p>A common way to define an array in Javascript is to use an array literal.</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> picnicBasket <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"burrito ğŸ¥™"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"strawberry ğŸ“"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"bottle of champagne ğŸ¾"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<p>However, itâ€™s sometimes desirable to populate the array conditionally based on the value of some variable. Perhaps youâ€™ve attempted to accomplish this in the past with a ternary operator:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> picnicBasket <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"burrito ğŸ¥™"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"strawberry ğŸ“"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"bottle of champagne ğŸ¾"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  isSunny <span class="token operator">?</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"sunglasses ğŸ•¶"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span> <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picnicBasket<span class="token punctuation">)</span>\n<span class="token comment">// isSunny === true  ->  [Object, Object, Object, Object]</span>\n<span class="token comment">// isSunny === false  ->  [Object, Object, Object, null]</span></code></pre>\n      </div>\n<p>or with the <code class="language-text">&amp;&amp;</code> operator.</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> picnicBasket <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"burrito ğŸ¥™"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"strawberry ğŸ“"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"bottle of champagne ğŸ¾"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  isSunny <span class="token operator">&amp;&amp;</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"sunglasses ğŸ•¶"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picnicBasket<span class="token punctuation">)</span>\n<span class="token comment">// isSunny === true  ->  [Object, Object, Object, Object]</span>\n<span class="token comment">// isSunny === false  ->  [Object, Object, Object, false]</span></code></pre>\n      </div>\n<p>Both of the above result in either <code class="language-text">null</code> or <code class="language-text">false</code> being added to the array if <code class="language-text">isSunny</code> is false, which is not what we want.</p>\n<h2>The solution</h2>\n<p>To solve this, we have two options.</p>\n<h3>Using filter</h3>\n<p>One rather clean and readable approach is to populate the array using the <code class="language-text">&amp;&amp;</code> operator, and then remove its falsy values by chaining on a <code class="language-text">filter</code> call.</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> picnicBasket <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"burrito ğŸ¥™"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"strawberry ğŸ“"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"bottle of champagne ğŸ¾"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  isSunny <span class="token operator">&amp;&amp;</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"sunglasses ğŸ•¶"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picnicBasket<span class="token punctuation">)</span>\n<span class="token comment">// isSunny === true  ->  [Object, Object, Object, Object]</span>\n<span class="token comment">// isSunny === false  ->  [Object, Object, Object]</span></code></pre>\n      </div>\n<h3>Using the spread operator</h3>\n<p>Another approach is to leverage the fact that <strong>spreading an empty array inside another array doesnâ€™t result in anything</strong>.</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> picnicBasket <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"burrito ğŸ¥™"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"strawberry ğŸ“"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"bottle of champagne ğŸ¾"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token operator">...</span><span class="token punctuation">(</span>isSunny <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"sunglasses ğŸ•¶"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picnicBasket<span class="token punctuation">)</span>\n<span class="token comment">// isSunny === true  ->  [Object, Object, Object, Object]</span>\n<span class="token comment">// isSunny === false  ->  [Object, Object, Object]</span></code></pre>\n      </div>\n<h3>What about object literals?</h3>\n<p>While the above approach can look a bit messy at first, it has the benefit of not only working with array literals, but with object literals too. In the example below, the property <code class="language-text">c</code> with the value <code class="language-text">3</code> will only be added if <code class="language-text">someCondition</code> is true.</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>\n  a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>\n  b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>\n  <span class="token operator">...</span><span class="token punctuation">(</span>someCondition <span class="token operator">?</span> <span class="token punctuation">{</span> c<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>\n<span class="token comment">// someCondition === true  ->  Object {a: 1, b: 2, c: 3}</span>\n<span class="token comment">// someCondition === false  ->  Object {a: 1, b: 2}</span></code></pre>\n      </div>\n<p>And thatâ€™s pretty neat!</p>',excerpt:"The problem A common way to define an array in Javascript is to use an array literal. However, itâ€™s sometimes desirable to populate the array conditionally based on the value of some variable. Perhaps youâ€™ve attempted to accomplish this in the past with a ternary operator: or with the   operator. Both of the aboveâ€¦",frontmatter:{title:"Conditional array and object literals",author:"Kalle Bornemark",date:"31st August 2018",path:"/conditional-array-object-literals"}}},pathContext:{}}}});
//# sourceMappingURL=path---conditional-array-object-literals-9736045993563168dfed.js.map