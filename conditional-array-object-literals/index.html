<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/codestuff/component---src-layouts-index-tsx-96bf604277bc0e6b3d7e.js" as="script"/><link rel="preload" href="/codestuff/component---src-templates-post-tsx-518fcd26ed896ee9a1d2.js" as="script"/><link rel="preload" href="/codestuff/path---conditional-array-object-literals-21413390e313d08aa9f3.js" as="script"/><link rel="preload" href="/codestuff/app-2eb622a2b6d715d36a7d.js" as="script"/><link rel="preload" href="/codestuff/commons-5fd7aeff2413da28908b.js" as="script"/><style data-styled-components="ZWAwl kBgtnz gjEiFD fyiKDz iAIQai irbXol gVurpn hhuWrh chFgRW ebgZMs">
/* sc-component-id: sc-bdVaJa */
.ebgZMs{text-align:center;margin:4rem 0 2.5rem 0;font-size:1.4em;color:#bdbdbd;} @media only screen and (max-width:800px){.ebgZMs{font-size:1.2em;}}
/* sc-component-id: sc-global-1031813546 */
html{height:100%;font-size:10px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;} body{min-height:100%;} *{margin:0;padding:0;box-sizing:border-box;} a{-webkit-text-decoration:none;text-decoration:none;color:inherit;}
/* sc-component-id: sc-bwzfXH */
.ZWAwl{display:grid;min-height:100vh;grid-template-rows:auto 1fr auto;}
/* sc-component-id: sc-htpNat */
.kBgtnz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-width:0;}
/* sc-component-id: sc-bxivhb */
.gjEiFD{width:100%;background-color:#2e303d;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:64px 0 56px;margin-bottom:32px;min-height:25vh;} @media only screen and (max-width:800px){.gjEiFD{padding:32px 0 28px;}}
/* sc-component-id: sc-ifAKCX */
.fyiKDz{max-width:850px;width:100%;padding:0 16px;}
/* sc-component-id: sc-EHOje */
.hhuWrh{width:100%;max-width:850px;font-size:2em;padding:0 16px;margin-bottom:2rem;}
/* sc-component-id: sc-bZQynM */
.iAIQai{color:white;font-weight:bold;margin-bottom:8px;font-size:3.2em;} @media only screen and (max-width:800px){.iAIQai{margin-bottom:2rem;font-size:2.5em;}}
/* sc-component-id: sc-gzVnrw */
.irbXol{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;color:white;font-size:1.6em;}
/* sc-component-id: sc-htoDjs */
.gVurpn{margin:0 12px;}
/* sc-component-id: sc-dnqmqq */
.chFgRW{max-width:850px;font-size:1.6em;line-height:1.8em;color:#333333;padding:0 16px;width:100%;} .chFgRW > *:not(:first-child){margin-top:32px;} .chFgRW h2 + *,.chFgRW h3 + *,.chFgRW h4 + *,.chFgRW h5 + *,.chFgRW h6 + *{margin-top:16px !important;} .chFgRW ul,.chFgRW ol{margin-left:1.1em;} .chFgRW p a{color:#83728e;-webkit-text-decoration:underline;text-decoration:underline;} .chFgRW img{width:100%;border-radius:4px;} .chFgRW img + em,.chFgRW .gatsby-resp-image-wrapper + em{display:block;width:100%;font-size:1.4rem;font-style:normal;line-height:2rem;text-align:center;margin-top:8px;} .chFgRW pre{overflow:auto;padding:12px;font-size:1.4rem;border-radius:4px;} .chFgRW pre code{padding:0;} .chFgRW code{background-color:#f8f8f8;padding:4px 8px;font-size:14px;} .chFgRW blockquote{background-color:#2e303d;padding-left:8px;color:#757575;font-style:italic;} .chFgRW blockquote p{background-color:white;padding-left:8px;} .chFgRW iframe{border:none;}</style><title data-react-helmet="true">Conditional array and object literals | Code &amp; Stuff</title><meta data-react-helmet="true" name="theme-color" content="#2e303d"/><meta data-react-helmet="true" name="description" content="The problem A common way to define an array in Javascript is to use an array literal. However, sometimes it‚Äôs desirable to populate the array conditionally depending on the value of some variable. Perhaps you‚Äôve attempted to accomplish this with a ternary operator: or with the   operator. Both of the above result in‚Ä¶"/><style id="gatsby-inlined-css">pre{color:#1b1b1b;background-color:#f8f8f8}.token.cdata,.token.doctype,.token.prolog{color:#3ea7bb}.token.block-comment,.token.comment,.token.punctuation{color:#5f6364}.token.atrule,.token.attr-value,.token.boolean,.token.constant,.token.deleted,.token.function-name,.token.keyword,.token.number,.token.property,.token.symbol,.token.tag{color:#f05f40}.token.attr-name,.token.builtin,.token.char,.token.class-name,.token.function,.token.inserted,.token.selector,.token.string{color:#3ea7bb}.token.entity,.token.important,.token.operator,.token.regex,.token.url,.token.variable{color:#9756e1}.language-css .token.string,.style .token.string{color:#3ea7bb}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.namespace{opacity:.7}.token.cr:before,.token.lf:before,.token.tab:not(:empty):before{color:#e0d7d1}</style></head><body><div id="___gatsby"><div class="sc-bwzfXH ZWAwl" data-reactroot="" data-reactid="1" data-react-checksum="445093638"><!-- react-empty: 2 --><div class="sc-htpNat kBgtnz" data-reactid="3"><!-- react-empty: 4 --><header class="sc-bxivhb gjEiFD" data-reactid="5"><div class="sc-ifAKCX fyiKDz" data-reactid="6"><h1 class="sc-bZQynM iAIQai" data-reactid="7">Conditional array and object literals</h1><div class="sc-gzVnrw irbXol" data-reactid="8"><!-- react-text: 9 -->Kalle Bornemark<!-- /react-text --><span class="sc-htoDjs gVurpn" data-reactid="10">‚Ä¢</span><!-- react-text: 11 -->31st August 2018<!-- /react-text --><span class="sc-htoDjs gVurpn" data-reactid="12">‚Ä¢</span><!-- react-text: 13 -->3 min read<!-- /react-text --></div></div></header><div class="sc-EHOje hhuWrh" data-reactid="14"><a href="/codestuff/" data-reactid="15">‚Üê</a></div><article class="sc-dnqmqq chFgRW" data-reactid="16"><h2>The problem</h2>
<p>A common way to define an array in Javascript is to use an array literal.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> picnicBasket <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"burrito ü•ô"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"strawberry üçì"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"bottle of champagne üçæ"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>
      </div>
<p>However, sometimes it‚Äôs desirable to populate the array conditionally depending on the value of some variable. Perhaps you‚Äôve attempted to accomplish this with a ternary operator:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> picnicBasket <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"burrito ü•ô"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"strawberry üçì"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"bottle of champagne üçæ"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  isSunny <span class="token operator">?</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"sunglasses üï∂"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span> <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picnicBasket<span class="token punctuation">)</span>
<span class="token comment">// isSunny === true  ->  [Object, Object, Object, Object]</span>
<span class="token comment">// isSunny === false  ->  [Object, Object, Object, null]</span></code></pre>
      </div>
<p>or with the <code class="language-text">&amp;&amp;</code> operator.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> picnicBasket <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"burrito ü•ô"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"strawberry üçì"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"bottle of champagne üçæ"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  isSunny <span class="token operator">&amp;&amp;</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"sunglasses üï∂"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picnicBasket<span class="token punctuation">)</span>
<span class="token comment">// isSunny === true  ->  [Object, Object, Object, Object]</span>
<span class="token comment">// isSunny === false  ->  [Object, Object, Object, false]</span></code></pre>
      </div>
<p>Both of the above result in either <code class="language-text">null</code> or <code class="language-text">false</code> being added to the array if <code class="language-text">isSunny</code> is false, which is not what we want.</p>
<h2>The solution</h2>
<p>To solve this, we have two options.</p>
<h3>Using filter</h3>
<p>One rather clean and readable approach is to conditionally populate the array using the <code class="language-text">&amp;&amp;</code> operator, and then removing its falsy values by chaining on a <code class="language-text">filter</code> call.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> picnicBasket <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"burrito ü•ô"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"strawberry üçì"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"bottle of champagne üçæ"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  isSunny <span class="token operator">&amp;&amp;</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"sunglasses üï∂"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picnicBasket<span class="token punctuation">)</span>
<span class="token comment">// isSunny === true  ->  [Object, Object, Object, Object]</span>
<span class="token comment">// isSunny === false  ->  [Object, Object, Object]</span></code></pre>
      </div>
<h3>Using the spread operator</h3>
<p>Another approach is to leverage the fact that <strong>spreading an empty array inside another array doesn‚Äôt result in anything</strong>.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> picnicBasket <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"burrito ü•ô"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"strawberry üçì"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"bottle of champagne üçæ"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">(</span>isSunny <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"sunglasses üï∂"</span><span class="token punctuation">,</span> quantity<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picnicBasket<span class="token punctuation">)</span>
<span class="token comment">// isSunny === true  ->  [Object, Object, Object, Object]</span>
<span class="token comment">// isSunny === false  ->  [Object, Object, Object]</span></code></pre>
      </div>
<h3>What about object literals?</h3>
<p>While the above approach can look a bit messy at first, it has the benefit of working with both array and object literals.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">(</span>someCondition <span class="token operator">?</span> <span class="token punctuation">{</span> c<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
<span class="token comment">// someCondition === true  ->  Object {a: 1, b: 2, c: 3}</span>
<span class="token comment">// someCondition === false  ->  Object {a: 1, b: 2}</span></code></pre>
      </div>
<p>Neat!</p></article></div><footer class="sc-bdVaJa ebgZMs" data-reactid="17">MIT ‚í∏ Kalle Bornemark</footer></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-2eb622a2b6d715d36a7d.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","30862416422887":"component---src-templates-post-tsx-518fcd26ed896ee9a1d2.js","178469467687848":"component---src-pages-404-tsx-16aedececd4639c6bbe3.js","221374088121123":"component---src-pages-index-tsx-c3a8f025821322337449.js","60335399758886":"path----557518bd178906f8d58a.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","195004302411781":"path---conditional-array-object-literals-21413390e313d08aa9f3.js","109763708754463":"path---webpack-aliases-typescript-71e25a5846d9c19679fa.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","142629428675168":"path---index-1177768ff775b6cb3181.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","22676092666560":"component---src-layouts-index-tsx-96bf604277bc0e6b3d7e.js"}/*]]>*/</script><script>
            
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-41576939-5', 'auto');
      }
      </script><script>/*<![CDATA[*/["/codestuff/commons-5fd7aeff2413da28908b.js","/codestuff/app-2eb622a2b6d715d36a7d.js","/codestuff/path---conditional-array-object-literals-21413390e313d08aa9f3.js","/codestuff/component---src-templates-post-tsx-518fcd26ed896ee9a1d2.js","/codestuff/component---src-layouts-index-tsx-96bf604277bc0e6b3d7e.js"].forEach(function(s){document.write('<script src="'+s+'" defer></'+'script>')})/*]]>*/</script></body></html>