<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-tsx-85223c4a599fe511fc2d.js" as="script"/><link rel="preload" href="/component---src-templates-post-tsx-f7952b023f4990176a0c.js" as="script"/><link rel="preload" href="/path---container-security-2f2327e4649fc3ff34bb.js" as="script"/><link rel="preload" href="/app-698d351236920a9bb1f1.js" as="script"/><link rel="preload" href="/commons-e8ba142de36a99798fa1.js" as="script"/><style data-styled="eQDUlF  kWTICf bQilNs hizKTw laopQD eCTqXF iftNkp fWtwkP hyiyqK hiXBZF kwDKus hENymA fWceQo kWJftV euqipB fiyfXm kKjOYG ipjHjJ leVcBd bMVHaB gIzurG jWakKm caXzYk" data-styled-version="4.1.3">
/* sc-component-id: sc-bdVaJa */
.jWakKm{text-align:center;margin:4rem 0 2.5rem 0;font-size:1.4em;color:#adadad;} @media (max-width:800px){.jWakKm{font-size:1.2em;}}
/* sc-component-id: sc-bwzfXH */
.caXzYk{color:#9dc59fd1;}
/* sc-component-id: sc-global-1031813546 */
html{height:100%;font-size:10px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;} body{min-height:100%;} *{margin:0;padding:0;box-sizing:border-box;} a{-webkit-text-decoration:none;text-decoration:none;color:inherit;}
/* sc-component-id: sc-htpNat */
.eQDUlF{display:grid;min-height:100vh;grid-template-rows:auto 1fr auto;}
/* sc-component-id: sc-bxivhb */
.bQilNs{background-image:url(/static/bg-blue-noise.425da07f.png);color:white;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;-webkit-transition:height 0.1s ease-out;transition:height 0.1s ease-out;height:5rem;padding:0;position:fixed;box-shadow:0 3px 5px rgba(57,63,72,0.15);z-index:99;} @media (max-width:800px){.bQilNs{height:5rem;}}
/* sc-component-id: sc-ifAKCX */
.hizKTw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:1rem 0;}
/* sc-component-id: sc-EHOje */
.laopQD{font-size:2.6rem;line-height:2.5rem;-webkit-letter-spacing:1.1px;-moz-letter-spacing:1.1px;-ms-letter-spacing:1.1px;letter-spacing:1.1px;-webkit-transition:font-size 1s ease;transition:font-size 1s ease;}
/* sc-component-id: sc-bZQynM */
.eCTqXF{color:#a4bed2;font-size:0.85em;margin:0 .35rem 0 .3rem;font-weight:600;}
/* sc-component-id: sc-htoDjs */
.fiyfXm{width:100%;max-width:900px;}
/* sc-component-id: sc-dnqmqq */
.ipjHjJ{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:100%;padding:0 16px;}
/* sc-component-id: sc-iwsKbI */
.kKjOYG{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%;font-size:15px;margin:10rem 0 6rem 0;line-height:0px;-webkit-letter-spacing:20px;-moz-letter-spacing:20px;-ms-letter-spacing:20px;letter-spacing:20px;color:#c5c5c5;text-align:center;} @media (max-width:800px){.kKjOYG{margin:6rem 0 5rem 0;}}
/* sc-component-id: sc-gZMcBi */
.leVcBd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;opacity:0.7;} .leVcBd:hover{opacity:1;}
/* sc-component-id: sc-gqjmRU */
.bMVHaB{width:32px;height:32px;margin-right:16px;}
/* sc-component-id: sc-VigVT */
.gIzurG{font-size:1.6em;} @media (max-width:930px){.gIzurG{font-size:1.3em;}}
/* sc-component-id: sc-jTzLTM */
.kWTICf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-width:0;}
/* sc-component-id: sc-fjdhpX */
.iftNkp{width:100%;background-color:#f8f8f8;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:64px 0 56px;margin-top:5rem;margin-bottom:32px;min-height:20rem;} @media (max-width:800px){.iftNkp{padding:32px 0 28px;}}
/* sc-component-id: sc-jzJRlG */
.kWJftV{width:100%;max-width:900px;font-size:2em;padding:0 16px;margin-bottom:2rem;}
/* sc-component-id: sc-cSHVUG */
.fWtwkP{max-width:900px;width:100%;padding:0 16px;display:grid;grid-row-gap:1rem;grid-column-gap:1.5rem;grid-template-columns:min-content 1fr;grid-template-areas: 'avatar title' 'avatar subtext';} @media (max-width:550px){.fWtwkP{grid-row-gap:2rem;grid-template-columns:1fr min-content;grid-template-areas: 'title title' 'subtext avatar';}}
/* sc-component-id: sc-kAzzGY */
.hyiyqK{grid-area:avatar;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;border-radius:50%;background:url(https://pbs.twimg.com/profile_images/1805638258/bwbcbb_square_normal.jpg);width:48px;height:48px;background-size:cover;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}
/* sc-component-id: sc-chPdSV */
.hiXBZF{grid-area:title;color:#352f4a;font-weight:bold;font-size:3.2em;} @media (max-width:800px){.hiXBZF{font-size:2.7em;}}
/* sc-component-id: sc-kgoBCf */
.kwDKus{grid-area:subtext;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;color:#35304ab0;font-size:1.42rem;} @media (max-width:550px){.kwDKus{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}
/* sc-component-id: sc-kGXeez */
.hENymA{margin-right:.5rem;}
/* sc-component-id: sc-kpOJdX */
.fWceQo{margin:0 12px;opacity:0.8;} @media (max-width:550px){.fWceQo{display:none;}}
/* sc-component-id: sc-dxgOiQ */
.euqipB{max-width:900px;font-size:1.6em;line-height:1.8em;color:#333333;padding:0 16px;width:100%;} @media (max-width:800px){.euqipB{font-size:1.8rem;}} .euqipB > *:not(:first-child){margin-top:32px;} .euqipB h2{font-size:1.3em;} .euqipB h2 + *,.euqipB h3 + *,.euqipB h4 + *,.euqipB h5 + *,.euqipB h6 + *{margin-top:16px !important;} .euqipB hr{border-top:none;border-color:lightgray;} .euqipB ul,.euqipB ol{margin-left:1.1em;} .euqipB ul > li:not(:last-child),.euqipB ol > li:not(:last-child){margin-bottom:1rem;} .euqipB a{word-break:break-all;color:#3ea7bb;-webkit-text-decoration:underline;text-decoration:underline;} .euqipB a:visited{color:#3ea7bb;} .euqipB img{border-radius:4px;max-width:100%;} .euqipB img + em,.euqipB .gatsby-resp-image-wrapper + em{display:block;width:100%;font-size:1.4rem;font-style:normal;line-height:2rem;text-align:center;margin-top:8px;} .euqipB pre{overflow:auto;padding:12px;font-size:1.4rem;border-radius:4px;word-break:break-all;} .euqipB pre code{padding:0;} .euqipB code{background-color:#f8f8f8;padding:4px 8px;font-size:14px;} .euqipB blockquote{background-color:#352f4a;padding-left:8px;color:#757575;font-style:italic;} .euqipB blockquote p{background-color:white;padding-left:8px;} .euqipB iframe{border:none;} .euqipB p > a{word-break:keep-all;}</style><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><title data-react-helmet="true">Container security | code &amp; such</title><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF0WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTAxLTIwVDIxOjAzOjEwKzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTAxLTIwVDIxOjAzOjEwKzAxOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wMS0yMFQyMTowMzoxMCswMTowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5Yjg4ZGI5ZS1hZThjLTVlNDctYWJlYi1hYTcxNzJiNTllOWIiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpmYWIwY2U3OC04OGY1LWMxNGYtYjBmNC1iMmM0MDAzYzU1Y2EiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1NGZlODEwZS0xN2YzLTQ4NDEtOTk0OS03NDY4ZTI1ZWI3MzAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NGZlODEwZS0xN2YzLTQ4NDEtOTk0OS03NDY4ZTI1ZWI3MzAiIHN0RXZ0OndoZW49IjIwMTktMDEtMjBUMjE6MDM6MTArMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OWI4OGRiOWUtYWU4Yy01ZTQ3LWFiZWItYWE3MTcyYjU5ZTliIiBzdEV2dDp3aGVuPSIyMDE5LTAxLTIwVDIxOjAzOjEwKzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+lFOFqwAAAhhJREFUOI2Nkr9PE2EYxz/3o2eveKlESrlKQlGjp6TFKoNhwambiZPOMkA0TAwkTuz8C+7oyu/oqpOLwaU14KA2rRHUK71rtXfvvQ4EDLZFv+P7Ps+T7+f5Psr8/PxBqVSy6CEpJb7vMzMzQ6FQuCuEWC+Xy4yNjWFZFnoikWBpaQnHcYiiqGOAYRjs7OywuLiI53lrxWLx6CsCLmhTU1NPHMc5I4Rgf38f13Wp1+vouo5pmgDEYjFyuRzrGxs8X16mr3nA2ouXyo2JiVldSommadi23eFACAGAaZrk83nG83myo1nuXb/M05UNXNdFVxQFIQS1Wo1Wq4WiKB0YQgiGMhe5Mx5Dj19i89VnYufTZEdGUHst70hhGHJuYJiz4TZO6iNbq88old7zcHo6SiaTV05FAEA3wH2L3thk5bVH6avNo8ezpAdTV4Mg+HIqglAS9IkyA61VuPaASvMdk5NJ0oOpQhAEuwB6L+tCMUmIXdLBFj+0HKp6G+Q2uqZQqVRot9uHBrsiaAb4H+DTJiRv0T90HyOmIqVASnmS8G8EqcaJiyp2sIKvjlDzbtL/7Tv2UKprQidSkIqOIX3S0Rtaaoq9WBFN0/G9+mGx2hnaMUImk+HnrzbeXpUoUcQcGCarxkH+SebosLoiVKtVPM/Dsizi9ihhGJ5o7qWuSwzD8J+NxwOazSYLCwv/VdxoNJibm0PTtOO33wUC+RqjHDCJAAAAAElFTkSuQmCC"/><meta data-react-helmet="true" name="theme-color" content="#352f4a"/><meta data-react-helmet="true" name="description" content="These days it seems everybody is either using container technology or looking to use it soon. In every technology trend, there is something that is too often forgotten about in the frenzy of eagerness to use the new and exiting tools and techniques - security. Note: When I say containers in this post I mean Docker‚Ä¶"/><style id="gatsby-inlined-css">pre{color:#1b1b1b;background-color:#f8f8f8}.token.cdata,.token.doctype,.token.prolog{color:#3ea7bb}.token.punctuation{color:#5f6364}.token.block-comment,.token.comment{color:#b3b9bb}.token.atrule,.token.attr-value,.token.boolean,.token.constant,.token.deleted,.token.function-name,.token.keyword,.token.number,.token.property,.token.symbol,.token.tag{color:#f05f40}.token.attr-name,.token.builtin,.token.char,.token.class-name,.token.function,.token.inserted,.token.selector,.token.string{color:#3ea7bb}.token.entity,.token.important,.token.operator,.token.regex,.token.url,.token.variable{color:#9756e1}.language-css .token.string,.style .token.string{color:#3ea7bb}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.namespace{opacity:.7}.token.cr:before,.token.lf:before,.token.tab:not(:empty):before{color:#e0d7d1}</style></head><body><div id="___gatsby"><div class="sc-htpNat eQDUlF"><div class="sc-jTzLTM kWTICf"><a class="sc-bxivhb bQilNs" href="/"><div class="sc-ifAKCX hizKTw"><h1 class="sc-EHOje laopQD">code<span class="sc-bZQynM eCTqXF">&amp;</span>such</h1></div></a><header class="sc-fjdhpX iftNkp"><div class="sc-cSHVUG fWtwkP"><a src="https://pbs.twimg.com/profile_images/1805638258/bwbcbb_square_normal.jpg" href="https://www.twitter.com/@fighterhayabusa" class="sc-kAzzGY hyiyqK"></a><h1 class="sc-chPdSV hiXBZF">Container security</h1><div class="sc-kgoBCf kwDKus"><div><span class="sc-kGXeez hENymA">üìù</span><a href="https://www.twitter.com/@fighterhayabusa">Daniel L√∂fquist</a></div><span class="sc-kpOJdX fWceQo">‚Ä¢</span><div><span class="sc-kGXeez hENymA">üìÖ</span><span>25th January 2019</span></div><span class="sc-kpOJdX fWceQo">‚Ä¢</span><div><span class="sc-kGXeez hENymA">‚òï</span><span>5 min read</span></div></div></div></header><div class="sc-jzJRlG kWJftV"><a href="/">‚Üê</a></div><article class="sc-dxgOiQ euqipB"><p>These days it seems everybody is either using container technology or looking to use it soon. In every technology trend, there is something that is too often forgotten about in the frenzy of eagerness to use the new and exiting tools and techniques - security.</p>
<p><em>Note: When I say containers in this post I mean Docker containers since this is the type of containers that I have the bulk of my experience with.</em></p>
<p>Security, in general, is an enormous topic and narrowing it down to just things regarding container technology doesn‚Äôt make it even close to sufficiently small enough to cover in a simple blog post. Many things are big enough to warrant a separate article in itself. Therefore this will be a mixture of quick pointers and some fairly simple tricks to get you started on thinking about the security of your Docker containers.</p>
<h1 id="the-basics-ie-things-you-should-already-know"><a href="#the-basics-ie-things-you-should-already-know" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Basics (i.e. things you should already know)</h1>
<p>Containers run on a host system, thus the security of this host matters and you should always follow regular security practices for the host-OS in question. Always keep your host-OS and software running on it current with the latest updates and patches. Don‚Äôt forget to lock down who can access the host, physically as well as from the internal network and the public internet (of course!).</p>
<p>Containers run your application, so guess what? Application security naturally also applies. Use the OWASP guidelines for secure coding practices and any other established guidelines that apply to your application‚Äôs language, platform, and runtime. Be careful with the dependencies you include in your application (hey, JS-devs! I‚Äôm looking at you!). Make sure to keep your source code safe and free from sensitive information like passwords, API-keys and alike.</p>
<p>OK, now that‚Äôs out of the way ‚Äì what can we do about the containers?</p>
<h1 id="containers---locking-it-down"><a href="#containers---locking-it-down" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Containers - locking it down</h1>
<h2 id="some-things-to-keep-in-mind"><a href="#some-things-to-keep-in-mind" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Some things to keep in mind</h2>
<p>In Docker, the host operating system kernel is shared by the containers you‚Äôre running. Because of this, a kernel exploit may take down the entire host and not just a running container that‚Äôs subjected to an attack. Be aware of this.</p>
<p>Your Docker containers share the resources of the host. Therefore it‚Äôs a good idea to restrict your containers so that one container can‚Äôt hog all the resources and starve the others to cause a DoS-attack of sorts to your application.</p>
<p>When basing your Docker image on an existing image, make sure to only use images from trusted sources. Beware of poisoned images.</p>
<h2 id="writing-your-dockerfile-building-the-image-and-running-the-container"><a href="#writing-your-dockerfile-building-the-image-and-running-the-container" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Writing your Dockerfile, building the image and running the container</h2>
<p>Below is a list of things you can do when putting together your Dockerfile to increase the security of the created image as well as things to do when actually building and finally running in Docker. Don‚Äôt for a second think this list is anywhere near complete though, but it‚Äôs a good start at least.</p>
<ul>
<li>Do not write secrets (passwords, API-keys, etc.) in your <code class="language-text">Dockerfile</code>.</li>
<li>If you don‚Äôt need the extra functionality supplied by <code class="language-text">ADD</code> (i.e. file-download and archive unpacking), use <code class="language-text">COPY</code> instead.</li>
<li>Create a user (or users), only run as root when absolutely necessary.</li>
<li>Remove unnecessary setuid and setgid permissions.</li>
<li>Consider using seccomp to further restrict permissions.</li>
<li>Do not download any unnecessary packages.</li>
<li>Remove unnecessary packages pre-existing in the image.</li>
<li>If possible use <code class="language-text">--no-cache</code> when building for production to avoid image poisoning via the cache.</li>
<li>Use a security scanner to scan your images. There are many to choose from. Personally, I like <a href="https://github.com/aquasecurity/microscanner" target="_blank" rel="nofollow">https://github.com/aquasecurity/microscanner</a> together with <a href="https://github.com/lukebond/microscanner-wrapper" target="_blank" rel="nofollow">https://github.com/lukebond/microscanner-wrapper</a></li>
<li>Isolate containers with user namespaces</li>
</ul>
<h2 id="image-size-and-how-it-relates-to-security"><a href="#image-size-and-how-it-relates-to-security" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Image size and how it relates to security</h2>
<p>One might think that efficiency is more of a focus when striving for smaller Docker images. However, a larger image contains more stuff - more software - and thus makes for a larger attack surface. So even if only for this reason a smaller image is preferred over a larger one.</p>
<p>As a general rule try to use the newest version of the smallest base-image you can. Many distributions also have a slim version that is considerably smaller. The <code class="language-text">debian:stretch</code> image, for example, is 101MB while the <code class="language-text">debian:stretch-slim</code> image is only 55MB. <a href="https://alpinelinux.org/" target="_blank" rel="nofollow">Alpine</a> is a popular distribution for <a href="https://hub.docker.com/_/alpine" target="_blank" rel="nofollow">containers</a> that has a very small footprint and I‚Äôd recommend giving that a try to get your images down even further in size.</p>
<p>The resulting image built from the <code class="language-text">Dockerfile</code> below is 106MB.</p>
<div class="gatsby-highlight">
      <pre class="language-text"><code class="language-text">FROM debian:stretch-slim

RUN apt update \
    &amp;&amp; apt upgrade -y \
    &amp;&amp; apt install --no-install-recommends --no-install-suggests -y samba nginx openssl git wget curl \
    &amp;&amp; apt remove --purge --auto-remove -y samba openssl git wget curl \
    &amp;&amp; rm -rf /var/lib/apt/lists/*
    # Clear up the cache also

EXPOSE 80

CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</code></pre>
      </div>
<p>The image built from the following <code class="language-text">Dockerfile</code> is under 12MB although it is functionally identical to the one above.</p>
<div class="gatsby-highlight">
      <pre class="language-text"><code class="language-text">FROM alpine:latest

RUN apk update \
    &amp;&amp; apk upgrade \
    &amp;&amp; apk add --no-cache nginx bash\
    &amp;&amp; adduser -D -g &#39;www&#39; www \
    &amp;&amp; mkdir /www \
    &amp;&amp; mkdir -p /run/nginx/ \
    &amp;&amp; chown -R www:www /var/lib/nginx \
    &amp;&amp; chown -R www:www /www

EXPOSE 80

CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</code></pre>
      </div>
<p>That‚Äôs quite a difference in size!</p>
<h1 id="finishing-up"><a href="#finishing-up" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Finishing up</h1>
<p>What you‚Äôve read above is by no means a complete guide to container security, but it should give you a good start as well as plenty of things to research on your own. Happy containerizing and stay secure out there!</p></article><div class="sc-htoDjs fiyfXm"><div class="sc-iwsKbI kKjOYG">¬∞¬∞¬∞</div><div class="sc-dnqmqq ipjHjJ"><a href="https://twitter.com/intent/tweet?text=Container%20security%20by%20@fighterhayabusa%20https://codeandsuch.github.io/container-security" target="_blank" rel="noreferrer noopener" class="sc-gZMcBi leVcBd"><img src="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjMURBMUYyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICA8cGF0aCBkPSJNMTAwIDE5YTQxIDQxIDAgMCAxLTExLjc4IDMuMjMgMjAuNiAyMC42IDAgMCAwIDktMTEuMzQgNDEuMzYgNDEuMzYgMCAwIDEtMTMgNSAyMC41MyAyMC41MyAwIDAgMC0zNSAxOC43QTU4LjI0IDU4LjI0IDAgMCAxIDcgMTMuMTRhMjAuNTQgMjAuNTQgMCAwIDAgNi4zNSAyNy4zOEEyMC41MiAyMC41MiAwIDAgMSA0IDM4di4yNmEyMC41MyAyMC41MyAwIDAgMCAxNi40OCAyMC4wNiAyMC43OCAyMC43OCAwIDAgMS01LjQxLjcyIDE5LjY5IDE5LjY5IDAgMCAxLTMuODYtLjM4IDIwLjUyIDIwLjUyIDAgMCAwIDE5LjE2IDE0LjI1IDQxLjE2IDQxLjE2IDAgMCAxLTI1LjQ4IDguNzdBNDMuNiA0My42IDAgMCAxIDAgODEuMzlhNTggNTggMCAwIDAgMzEuNDQgOS4yM2MzNy43NCAwIDU4LjM2LTMxLjI2IDU4LjM2LTU4LjM2bC0uMDctMi42NkE0MSA0MSAwIDAgMCAxMDAgMTl6Ii8+Cjwvc3ZnPg==" alt="Share on Twitter" class="sc-gqjmRU bMVHaB"/><span class="sc-VigVT gIzurG">Liked this post? Feel free to share it on Twitter!</span></a></div></div></div><footer class="sc-bdVaJa jWakKm">MIT ‚í∏ <a href="https://kallebornemark.github.io/" class="sc-bwzfXH caXzYk">Kalle Bornemark</a></footer></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-698d351236920a9bb1f1.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","30862416422887":"component---src-templates-post-tsx-f7952b023f4990176a0c.js","178469467687848":"component---src-pages-404-tsx-59cbcd25a8dcb0d9a9b1.js","221374088121123":"component---src-pages-index-tsx-38d3a6df722f90a90862.js","60335399758886":"path----557518bd178906f8d58a.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","195004302411781":"path---conditional-array-object-literals-b03eac5e06b62e08f7ec.js","109763708754463":"path---webpack-aliases-typescript-3d84d652b66aec08bb7b.js","228344554384884":"path---extensions-sept-18-6ee80bd6ae995b2243ef.js","204281452866430":"path---simplify-backticks-36cbd64e79ab86447b87.js","266549308373791":"path---container-security-2f2327e4649fc3ff34bb.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","142629428675168":"path---index-afb9bd5b5df3e00f533c.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","22676092666560":"component---src-layouts-index-tsx-85223c4a599fe511fc2d.js"}/*]]>*/</script><script>
            
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-41576939-5', 'auto');
      }
      </script><script>/*<![CDATA[*/["/commons-e8ba142de36a99798fa1.js","/app-698d351236920a9bb1f1.js","/path---container-security-2f2327e4649fc3ff34bb.js","/component---src-templates-post-tsx-f7952b023f4990176a0c.js","/component---src-layouts-index-tsx-85223c4a599fe511fc2d.js"].forEach(function(s){document.write('<script src="'+s+'" defer></'+'script>')})/*]]>*/</script></body></html>